// handling multipart/form-data

// configure where to store
const storage = multer.diskStorage({
    destination: function (req, file, cb) {
        cb(null, 'uploads/');//directory to save files
    },
    filename: function (req, file, cb) {
        cb(null, Date.now() + '-' + file.originalname); // rename to avoid conflicts
    }
})

const upload = multer({storage: storage})

// Multer's middlewareupload.
// ... (multer configuration from above) ...
app.post('/upload-profile', upload.single('avatar'), (req, res) => {
    if (!req.file) {
        return res.status(400).send('No file to upload.')
    }
    res.send('Image upload successfully: ' + req.file.filename)
})

// HTML
<form action="/upload-profile" method="POST" enctype="multipart/form-data">
    <input type="file" name="avatar">
    <button type="submit">Upload Image</button>
</form>